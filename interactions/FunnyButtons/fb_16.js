const client = require('../../index.js');
const config = require("../../config.js");
const { MessageActionRow, MessageEmbed, MessageButton } = require('discord.js');
const { CommandCooldown, msToMinutes } = require('discord-command-cooldown');
const ms = require('ms');

client.on("interactionCreate", async (i) => {
if (i.customId === "fb_16") {
    const earnCashCommandCooldown = new CommandCooldown('earnCash', ms("10s"));

    const buttonName = "ãƒ¡ã‚¹å •ã¡é˜»æ­¢ãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒœã‚¿ãƒ³"
    const buttonmessage = "å›ã¯ãƒ¡ã‚¹å •ã¡ã—ã¦ã—ã¾ã†ã®ã‹"
    const buttonId = "fb_16"
    const count = "23"

    const userCooldowned = await earnCashCommandCooldown.getUser(`${i.guild.id}_${i.user.id}`);

    if (userCooldowned) {
        const timeLeft = msToMinutes(userCooldowned.msLeft, false);

        const TimeEmbed = new MessageEmbed()
            .setColor(config.color)
            .setTitle(`${i.user.tag}ã®ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³`)
            .setDescription("ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ä¸­ã§ã™ã€‚\n```" + timeLeft.hours + ' æ™‚é–“ ' + timeLeft.minutes + ' åˆ† ' + timeLeft.seconds + ' ç§’' + "```\nå¾Œã«ã¾ãŸå®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚")
            .setTimestamp();

        await i.reply({ embeds: [TimeEmbed], ephemeral: true });
    } else {
        await earnCashCommandCooldown.addUser(`${i.guild.id}_${i.user.id}`);

        const tasks = [
            "ã€Œã ã€èª°ãŒãƒ¡ã‚¹ã«ãªã‚“ã‹ãªã€ãï¾ã€ã‚ï¾ï¼ãã“ã‚„ã‚ãƒƒã€ã‚„ï¾ããƒƒâ™¡â™¡ã‚ƒã€ãã‚“ï¾ãƒƒâ™¡ã‰ï¾â™¡â™¡â™¡ã€ã¨ç™ºè¨€ã™ã‚‹",
            "ã€Œã‚„ã ãƒƒã€ã‚„ã ã€ã‚„ã€ãã“ã ã‚ã‡ï¾â™¡å¥³ã®å­ãªã‚‹ãƒƒâ™¡â™¡ãŠã‚“ã«ï¾ã‚ƒã®ã“ã«ãªã£ã¡ï¾ã‚ƒã…ï¾ã…ã†â™¡â™¡â™¡â™¡â™¡ã€ã¨ç™ºè¨€ã™ã‚‹",
            "ã€Œã ã‚â™¡ã ã‚ãªã®â™¡ã‚ã—ã‚…ã«ãªã‚…â™¡â™¡ã‚ã—ã‚…ã«ãªã£ã¡ã‚ƒã†ã‹ã‚‰ãƒƒâ™¡â™¡â™¡ã‚†ã‚‹ã²â”€â”€ã²ã…ã‚“â™¡â™¡â™¡ã€ã¨ç™ºè¨€ã™ã‚‹",
            "ã€Œãã€ãã‚†ã‚‹ï¾ã—ã¦ãƒƒâ™¡â™¡ã”ã‚ã€ãªã•ãã‚ï¾ã‚ï¾â™¡â™¡â™¡ã‚‚ã†ã—ã¾ã›ãƒƒã€ã‚‚ã†ã—ã¾ã›ã‚“â™¡â™¡â™¡â™¡ãƒ¡ã‚¹ã®ãã›ã«ã”ã‚ã‚“ãªã—ã‚ƒâ”€â”€ã‰ï¾ã£â™¡â™¡â™¡ã€ã¨ç™ºè¨€ã™ã‚‹",
            "ã€Œå±ˆã™ã‚‹â™¡å±ˆã—ã¡ã‚ƒã†â™¡â™¡ç”·ãªã®ã«ãƒƒã€å¥³ã®å­ã«ã•ã‚Œã¡ã‚ƒã†ãƒƒâ™¡â™¡ãƒ¡ã‚¹ã«ãªã£ã¡ã‚ƒã†ã®â™¡â™¡â™¡â™¡ã€ã¨ç™ºè¨€ã™ã‚‹",
            "ã€ŒãŠï¾ã²ã£â™¡â™¡ã¯ã€ãï¾ãï¾â™¡â™¡è² ã‘ã¡ã‚ƒã†ãƒƒã‚ã—ã‚…ã«ãªã…â™¡â™¡â™¡å •ã¡ã¡ã‚ƒã†ã®ãƒƒï¼ã¯ã…ï¾ã‚“â™¡â™¡â™¡ã€ã¨ç™ºè¨€ã™ã‚‹",
            "ã€Œã‚ã£ã‚ã£ã‚ã£ãã‚‚ã¡ãƒã€ãã‚‚ã¡ã„ã®ã™ããƒƒâ™¡â™¡ã²ãƒï¾ãƒƒã€ãŠã‚“ãªã®ã“ã«ãªã£ã¡ã‚ƒã†â™¡â™¡ã‰ï¾ãƒƒâ”€â”€ã€ã¨ç™ºè¨€ã™ã‚‹",
            "ã€Œã„ã‚„ãï¾ãï¼ã‚„ã‚‰ï¾ãƒƒã€ã‚“ãƒƒâ™¡ã‚„ã‚‰ã€å •ã¡ãŸããªã„ï¼ã‰ï¾ãƒƒâ™¡ãƒ¡ã‚¹ã«ãªã‚“ã‹ãâ™¡â™¡ãªã‚‰ãªâ”€â”€ãï¾ã‚ãï¾ãƒƒâ™¡â™¡â™¡â™¡ã€ã¨ç™ºè¨€ã™ã‚‹",
            "ã€Œã”ã‚â™¡â™¡ã”ã‚ã‚“ãªã—ã‚ƒãƒƒâ™¡â™¡ã‚‚ã†ã‚„ã‚‰ãƒƒå£Šã‚Œã‚‹â™¡â™¡å£Šã‚Œã¡ã‚ƒã†ã®ãƒƒâ™¡â™¡â™¡ãƒ¡ã‚¹å •ã¡ã™ã‚…ã®ã‰ï¾ã‰â™¡â™¡â™¡ã€ã¨ç™ºè¨€ã™ã‚‹",
            "ã€ŒãŠã²â™¡â™¡é¦¬é¹¿ã‚ãƒƒã€ã²ã‚“ãƒƒâ™¡â™¡â™¡ã“ã®ç¨‹åº¦ã§ãƒƒâ™¡â™¡å±ˆã™ã‚‹ã¨ã§ã‚‚ã€ã‰ï¾ãƒƒâ™¡â™¡æ€ã£ãŸã€ã‹ã€ãï¾ã£ã‚ã£ã‚ã‚â™¡â™¡â™¡â™¡ã€ã¨ç™ºè¨€ã™ã‚‹",
            "ã€ŒãŠã­ãŒâ™¡ã‚†ã‚‹ã²ã¦â™¡ãï¾ã²â™¡â™¡é ­ãŠã‹ã—ããªã…ã®ãƒƒâ™¡ãŠï¾â™¡ç”·ãªã®ã«ï¾ã£â™¡â™¡ãŠã‚“ãªã®ã“ã¿ãŸã„ã«ãªã‚‹ã®ï¾â™¡â™¡â™¡â™¡ã€ã¨ç™ºè¨€ã™ã‚‹",
            "ã€Œã‚¡ï¾â™¡ãã£ã‚ã£ã‚ãï¾èªã‚ã¾ã™ãƒƒï¼ãƒ¡ã‚¹ã§ã™â™¡â™¡èªã‚ã¾ã™ãƒƒâ™¡â™¡â™¡ã²ã‚“â™¡ã»ã€ã»ã‚‰è¨€ã£ãŸâ™¡è¨€ã£ãŸã‹ã‚‰ã‚‚ã†é›¢ã—â”€â”€ã‚ƒï¾ã‚ã‚ãï¾â™¡â™¡â™¡ã€ã¨ç™ºè¨€ã™ã‚‹",
            "ã€Œé•ã†ãƒƒâ™¡ã‰ï¾ãƒƒâ™¡ãƒ¡ã‚¹å •ã¡ã—ã¦ãªã„ãƒƒâ™¡â™¡ãƒ¡ã‚¹å •ã¡ãªã‚“ã¦ã‡ï¾â™¡ã™ã‚‹è¨³ãªã€ã²ãƒã‚“ï¾â™¡ãã“ã‚„ã ãï¾ãâ™¡â™¡ã€ã¨ç™ºè¨€ã™ã‚‹",
            "ã€Œã²ãƒƒâ™¡å¥³ã®å­ã‚¹ã‚¤ãƒƒãƒâ™¡â™¡â™¡ãŠã—ã‚ƒãªã„ã‚Œã£â™¡â™¡â™¡ãã“ã‚‰ã‚ãªã®ã£â™¡â™¡ã‚ãŸã¾â™¡ã‚ãŸã¾ãŠï¾ã‹ã²ããªã…ã®ã£â™¡â™¡â™¡ã€ã¨ç™ºè¨€ã™ã‚‹",
            "ã€Œã‚…ã‚‹ã²ã¦ã‡ï¾â™¡â™¡åˆ†ã‹ã£ãŸã®â™¡ã‚‚ã†ãƒ¡ã‚¹ã£ã¦åˆ†ã‹ã£ãŸã®â™¡â™¡ã”ã‚ã‚“ãªã—ã‚ƒã„â™¡æ€ã„ä¸ŠãŒã£ã¦ã€ã‡ï¾ãƒƒâ™¡ã”ã‚ã‚“ãªã²ã‚ƒâ”€â”€ã‚“ã‰ï¾ã‰ãŠãƒƒâ™¡â™¡â™¡ã€ã¨ç™ºè¨€ã™ã‚‹",
            "ã€Œå˜˜â™¡ã†ãã¤ã‹ãªã„ã§ãã ã—ã‚ƒâ™¡â™¡ãƒ¡ã‚¹ãªã‚“ã‹ã˜ã‚ƒã€ãŠã²ãƒƒâ™¡ã‚ã‚Šã¾ã²ã‡ã‚“â™¡â™¡ã©ã“ã‹ã‚‰ã©ã†ãƒƒè¦‹ã¦ã‚‚â™¡ã‰ï¾ã€ç”·ã§ã™ã£â™¡â™¡â™¡â™¡ã€ã¨ç™ºè¨€ã™ã‚‹",
            "ã€Œãï¾ã¯ãâ™¡ãŠï¾ã‚“ãªã®ã“ãã‚‚ã¡ã„ã®ã£â™¡â™¡ã“ã€ã“ã‡ãªã‚‰ãƒƒâ™¡â™¡ã‚‚ã£ã¨æ—©ãâ™¡ãŠã‚“ãªã®ã“ãªã‚Œã°ã€ã²ã‚“â™¡ã‚ˆã‹ã£ã²ã‚ƒâ™¡â™¡ã‰ã£ãŠï¾â™¡â™¡ã€œã€œã€œã€œâ™¡â™¡â™¡ã€ã¨ç™ºè¨€ã™ã‚‹",
            "ã€Œã‚‰ï¾ã‚ãªã®ãƒƒâ™¡â™¡ãï¾ã£ã€ãƒ¡ã‚¹ãªã£ã¢ã‚ƒã†ï¾ã®ï¾â™¡â™¡â™¡ã‚“ã…ï¾ã†ã€œã€œâ™¡â™¡â™¡ãƒ¡ã‚¹å •ã¡ã ã‚ãªã®ã‰ï¾ãƒƒã ã‚ã€ã‚‰ã‚ï¾ã€ã â”€â”€ãƒƒâ™¡ã€œã€œã€œã€œã€œâ™¡â™¡ã€ã¨ç™ºè¨€ã™ã‚‹",
            "ã€Œã£ã‚ï¾ã£â™¡â™¡ã“ã‚“ãªï¾ã“ã¨ã£â™¡ãŠãŒã²ãƒâ™¡ãƒ¡ã‚¹ã«ãªã‚“ã¦ãƒƒâ™¡â™¡ãªã…ã‚ã‘ã£â™¡â™¡ãªã‚‹è¨³ã£â™¡ãªã€ãã€ã‚ï¾ã€œã€œã€œâ™¡â™¡â™¡â™¡ã€ã¨ç™ºè¨€ã™ã‚‹",
            "ã€Œå •ã¡ã¦ãªã„ãƒƒâ™¡ã²ã…ï¾â™¡â™¡å •ã¡ã¦ãªã„ãƒƒâ™¡â™¡ã¾ã å •ã¡ã¦ãªã„ã®ã£â™¡â™¡ãï¾ã€ã‚ã£â™¡ã ã‹ã‚‰ã£â™¡â™¡ã¾ã ã€ã‚“ï¾ãƒƒâ™¡ã‚„ã‚ãªã„ã§ã‡â™¡â™¡ã€ã¨ç™ºè¨€ã™ã‚‹",
            "ã€ŒãŠï¾ãƒƒâ™¡ã€œã€œã€œã€œã€œâ™¡â™¡â™¡ã†ãï¾ã€é•ã†ãƒƒï¼é•ã†ä»Šã®ã¯ãƒƒâ™¡â™¡ã‚ã‚“ï¾â™¡å •ã¡ã¦ãªã„ï¾â™¡â™¡å •ã¡ã¦ãªã„ãâ™¡â™¡ãƒ¡ã‚¹ãªã‚“ã‹â™¡ãªã‚‹è¨³ã‡ãˆï¾â™¡â™¡â™¡â™¡ã€ã¨ç™ºè¨€ã™ã‚‹",
            "ã€Œã‚ã™ãƒƒâ™¡ãã²ãƒƒâ™¡ã‚ã™â™¡ã‚ã™ã«ã—ã¦ãã ã²ã‚ƒâ™¡â™¡â™¡ãŠï¾ã£â™¡ã‚‚ã£ã¨ãŠã‚“ã«ã‚ƒã®ã“ã«ã—ã¦ã‡ãƒƒâ™¡â™¡â™¡ã‚ã—ã‚…ãŠã¡ã—ãŸã„ã®ã‰ãŠï¾â™¡â™¡â™¡ã€ã¨ç™ºè¨€ã™ã‚‹",
            "ã€Œã‚ï¾ã™â™¡ã‚ƒï¾ã â™¡â™¡ã‰ï¾ãƒƒâ™¡ãã‚Œã‚„ã â™¡â™¡ã‚ãŸã¾ã°ã‹ã«ãªã£ã²ã‚ƒã†ãƒƒâ™¡ã‚„ã€ã‚„ã ãã€ã‚ï¾ãƒƒãã€ãƒƒã€ã€œã€œã€œã€œã€œã€œâ™¡â™¡â™¡â™¡ã€ã¨ç™ºè¨€ã™ã‚‹"
          ];

        const randomIndex = Math.floor(Math.random() * tasks.length);
        const result = tasks[randomIndex];

        const msgs = await i.channel.messages.fetch(i.message.id);

        msgs.embeds.forEach(async (lembed) => {
            const value = lembed.footer.text;
            if (value !== "0") {
                const Embed = new MessageEmbed()
                    .setColor(config.color)
                    .setTitle(buttonName)
                    .setDescription(`${i.user.username}: \n${result}`)
                    .setThumbnail(`${i.user.displayAvatarURL()}`)
                    .setTimestamp();
                i.reply({ content: i.user.toString(), embeds: [Embed] });

                const msg = await i.fetchReply();
                msg.react("ğŸ”");
                msg.react("â¤ï¸");

                const val = value - 1;

                const fEmbed = new MessageEmbed()
                    .setColor(config.color)
                    .setTitle(buttonName)
                    .setDescription(`çµæœãƒ‘ã‚¿ãƒ¼ãƒ³: ${count} é€šã‚Š`)
                    .setTimestamp()
                    .setFooter({ text: `${val}`, iconURL: '' });

                const button = new MessageActionRow()
                    .addComponents(
                        new MessageButton()
                            .setCustomId(buttonId)
                            .setLabel(buttonmessage)
                            .setStyle(`PRIMARY`),
                    );

                msgs.edit({ embeds: [fEmbed], components: [button] });

                if (value === "1") {
                    const finalEmbed = new MessageEmbed()
                        .setColor(config.color)
                        .setTitle(buttonName)
                        .setDescription(`çµæœãƒ‘ã‚¿ãƒ¼ãƒ³: ${count} é€šã‚Š`)
                        .setTimestamp()
                        .setFooter({ text: `å›æ•°åˆ¶é™ã«é”ã—ã¾ã—ãŸã€‚`, iconURL: '' });

                    const disabledButton = new MessageActionRow()
                        .addComponents(
                            new MessageButton()
                                .setCustomId(buttonId)
                                .setLabel(buttonmessage)
                                .setDisabled(true)
                                .setStyle(`PRIMARY`),
                        );

                    msgs.edit({ embeds: [finalEmbed], components: [disabledButton] });
                }
            }
        });
    }
}
});