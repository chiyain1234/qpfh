const client = require('../../index.js');
const config = require("../../config.js");
const { MessageActionRow, MessageEmbed, MessageButton } = require('discord.js');
const { CommandCooldown, msToMinutes } = require('discord-command-cooldown');
const ms = require('ms');

client.on("interactionCreate", async (i) => {
if (i.customId === "fb_08") {
    const earnCashCommandCooldown = new CommandCooldown('earnCash', ms("10s"));

    const buttonName = "ãƒœã‚«ãƒ­æ­Œã„ã‚„ãŒã‚Œãã ã•ã„ãƒœã‚¿ãƒ³"
    const buttonmessage = "é€ƒã’ã‚‹ãªã‚ˆ(^_^)"
    const buttonId = "fb_08"
    const count = "50"

    const userCooldowned = await earnCashCommandCooldown.getUser(`${i.guild.id}_${i.user.id}`);

    if (userCooldowned) {
        const timeLeft = msToMinutes(userCooldowned.msLeft, false);

        const TimeEmbed = new MessageEmbed()
            .setColor(config.color)
            .setTitle(`${i.user.tag}ã®ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³`)
            .setDescription("ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ä¸­ã§ã™ã€‚\n```" + timeLeft.hours + ' æ™‚é–“ ' + timeLeft.minutes + ' åˆ† ' + timeLeft.seconds + ' ç§’' + "```\nå¾Œã«ã¾ãŸå®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚")
            .setTimestamp();

        await i.reply({ embeds: [TimeEmbed], ephemeral: true });
    } else {
        await earnCashCommandCooldown.addUser(`${i.guild.id}_${i.user.id}`);

        const tasks = [
            "6RTã§ã€Œãƒãƒˆãƒªãƒ§ã‚·ã‚«ã€ã‚’æ­Œã†ã€‚\r\nã‚ãªãŸã¨ç§ã§ãƒ©ãƒ³ãƒ‡ãƒ–ãƒ¼ï¼Ÿ",
            "4ã„ã„ã­ã§ã€Œãƒ¯ãƒ¼ãƒ«ã‚ºã‚¨ãƒ³ãƒ‰ãƒ»ãƒ€ãƒ³ã‚¹ãƒ›ãƒ¼ãƒ«ã€ã‚’æ­Œã†ã€‚\r\nãƒ›ãƒƒãƒ—ã‚¹ãƒ†ãƒƒãƒ—ã§è¸Šã‚ã†ã‹",
            "10RTã§ã€Œé«˜éŸ³å¨éŸ³åŸŸãƒ†ã‚¹ãƒˆã€ã‚’æ­Œã†ã€‚\r\né«˜éŸ³å¨ã®æœ¬æ°—ã®åŠ›è¦‹ã›ã¦ãŠãã‚Œã‚ˆ",
            "7ã„ã„ã­ã§ã€Œè„³æ¼¿ç‚¸è£‚ã‚¬ãƒ¼ãƒ«ã€ã‚’æ­Œã†ã€‚\r\nã©ã†ã›100å¹´å¾Œã®ä»Šé ƒã«ã¯ã¿ã‚“ãªæ­»ã‚“ã˜ã‚ƒã£ã¦ã‚“ã ã‹ã‚‰",
            "2RTã§ã€Œãƒ¡ãƒ«ãƒˆã€ã‚’æ­Œã†ã€‚\r\nãƒ¡ãƒ«ãƒˆæº¶ã‘ã¦ã—ã¾ã„ãã†",
            "5RTã§ã€Œç ‚ã®æƒ‘æ˜Ÿã€ã‚’æ­Œã†ã€‚\r\nã¤ã¾ã‚Šå…ƒé€šã‚Šã¾ã§ãƒã‚¤ãƒã‚¤ãƒã‚¤",
            "4RTã§ã€Œãƒ­ã‚­ã€ã‚’æ­Œã†ã€‚\r\nå‹˜é•ã„ã™ã‚“ãªæ•™ç¥–ã¯ãŠå‰ã ",
            "18ã„ã„ã­ã§ã€ŒåˆéŸ³ãƒŸã‚¯ã®æ¶ˆå¤±ã€ã‚’æ­Œã†ã€‚\r\nã‹ã¤ã¦æ­Œã†ã“ã¨ã‚ã‚“ãªã«æ¥½ã—ã‹ã£ãŸã®ã«",
            "5RTã§ã€Œãƒ­ã‚¹ãƒˆãƒ¯ãƒ³ã®å·å“­ã€ã‚’æ­Œã†ã€‚\r\nã‚‚ã†ã©ã†ã ã£ã¦ã„ã„ã‚„",
            "9ã„ã„ã­ã§ã€Œãƒœãƒƒã‚«ãƒ‡ãƒ©ãƒ™ãƒªã‚¿ã€ã‚’æ­Œã†ã€‚\r\nã‚¢ã‚¤ã‚¢ã‚¤ã‚¢ã‚¤ãƒ˜ã‚¤ãƒãƒ¥ãƒ¼",
            "3RTã§ã€ŒKINGã€ã‚’æ­Œã†ã€‚\r\nå¼µã‚Šè©°ã‚ãŸæ€ã„è¾¼ã‚",
            "5RTã§ã€Œãƒ´ã‚£ãƒ©ãƒ³ã€ã‚’æ­Œã†ã€‚\r\nç”·å­ã®ãƒ•ãƒªã™ã‚‹",
            "8ã„ã„ã­ã§ã€Œã‚´ãƒ¼ã‚¹ãƒˆãƒ«ãƒ¼ãƒ«ã€ã‚’æ­Œã†ã€‚\r\nãŠã„ã§ã“ã“ã¾ã§æ¨ã¦ã„",
            "4ã„ã„ã­ã§ã€Œã‚¨ã‚´ãƒ­ãƒƒã‚¯ã€ã‚’æ­Œã†ã€‚\r\nåƒ•ã®å¿ƒã¯ã‚¨ã‚´ãƒ­ãƒƒã‚¯",
            "9ã„ã„ã­ã§ã€Œè„±æ³•ãƒ­ãƒƒã‚¯ã€ã‚’æ­Œã†ã€‚\r\nãã‚ŒãŒè„±æ³•ãƒ­ãƒƒã‚¯ã®ç¤¼æ³•ãªã‚“ã§ã™ã‚",
            "14ã„ã„ã­ã§ã€Œã—ã­ã°ã„ã„ã®ã«ã€ã‚’æ­Œã†ã€‚\r\nã©ã“ã‹é ãã®åƒ•ã®çŸ¥ã‚‰ãªã„å ´æ‰€ã§",
            "5RTã§ã€Œç¥ã£ã½ã„ãªã€ã‚’æ­Œã†ã€‚\r\nç¥ã£ã½ã„ãªãã‚Œ",
            "8ã„ã„ã­ã§ã€ŒECHOã€ã‚’æ­Œã†ã€‚\r\nThe clock stopped ticking forever ago",
            "4RTã§ã€Œãƒ´ã‚¡ãƒ³ãƒ‘ã‚¤ã‚¢ã€ã‚’æ­Œã†ã€‚\r\nå›ã‚‚ãƒ´ã‚¡ãƒ³ãƒ‘ã‚¤ã‚¢",
            "6ã„ã„ã­ã§ã€Œãƒ“ã‚¿ãƒ¼ãƒãƒ§ã‚³ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚’æ­Œã†ã€‚\r\näººã‚’éåº¦ã«ä¿¡ã˜ãªã„ã‚ˆã†ã«",
            "2ã„ã„ã­ã§ã€Œã ã‚Œã‹ã®å¿ƒè‡“ã«ãªã‚ŒãŸãªã‚‰ã€ã‚’æ­Œã†ã€‚\r\nçµ¶ãˆãšé¼“å‹•ã™ã‚‹å¿ƒè‡“ã ",
            "7ã„ã„ã­ã§ã€Œã‚­ãƒ¥ãƒ¼ãƒˆãªã‚«ãƒã‚¸ãƒ§ã€ã‚’æ­Œã†ã€‚\r\nç¬‘ã£ã¡ã¾ã†ã»ã©ã«ã‚­ãƒ¥ãƒ¼ãƒˆãªã‚«ãƒã‚¸ãƒ§",
            "6RTã§ã€Œãƒ†ã‚ªã€ã‚’æ­Œã†ã€‚\r\né›¢ã•ãªã„ã§ã‚ˆçœ¼å·®ã—ã‚’ï¼",
            "4RTã§ã€Œãƒ­ã‚¦ãƒ¯ãƒ¼ã€ã‚’æ­Œã†ã€‚\r\nåƒ•ã‚‰ãŒé›¢ã‚Œã‚‹ãªã‚‰",
            "5ã„ã„ã­ã§ã€Œãƒˆãƒ³ãƒ‡ãƒ¢ãƒ¯ãƒ³ãƒ€ãƒ¼ã‚ºã€ã‚’æ­Œã†ã€‚\r\nä¸–ç•Œè§£ä½“åç§’å‰ï¼ï¼Ÿå¾…ã£ã¦å¾…ã£ã¦å¾…ã£ã¦",
            "6ã„ã„ã­ã§ã€Œã‚·ãƒãƒã€ã‚’æ­Œã†ã€‚\r\nã¾ã ã“ã“ã˜ã‚ƒãªã„ãªã„",
            "8ã„ã„ã­ã§ã€Œãƒ™ãƒãƒ ã€ã‚’æ­Œã†ã€‚\r\nã‚ã‚‰ã¾æ±‚æ„›æ€§å­¤ç‹¬ãƒ‰ã‚¯æµã‚‹ãƒ«ãƒ«",
            "7ã„ã„ã­ã§ã€Œã‚¨ãƒ³ãƒ´ã‚£ãƒ¼ãƒ™ã‚¤ãƒ“ãƒ¼ã€ã‚’æ­Œã†ã€‚\r\nãƒ©ã‚¤ãƒ©ã‚¤ãƒ©ãƒ´ã‚£ãƒ³ã‚®ãƒ¥",
            "4ã„ã„ã­ã§ã€Œãƒ†ãƒ¬ã‚­ãƒ£ã‚¹ã‚¿ãƒ¼ãƒ“ãƒ¼ãƒœãƒ¼ã‚¤ã€ã‚’æ­Œã†ã€‚\r\nãƒ†ãƒ¬ã‚­ãƒ£ã‚¹ã‚¿ãƒ¼ãƒ“ãƒ¼ãƒœãƒ¼ã‚¤åƒ•ã«æ„›æƒ…ã‚’",
            "8RTã§ã€Œæ„›ã—ã¦æ„›ã—ã¦æ„›ã—ã¦ã€ã‚’æ­Œã†ã€‚\r\næ„›ã—ã¦æ„›ã—ã¦æ„›ã—ã¦",
            "4RTã§ã€Œæ‚ªé­”ã®è¸Šã‚Šæ–¹ã€ã‚’æ­Œã†ã€‚\r\nãŠå‰ã‚‰ã«å®Œç’§ã§é–“é•ã£ãŸè¸Šã‚Šæ–¹ã‚’æ•™ãˆã¦ã‚„ã‚‹ã‹ã‚‰",
            "5ã„ã„ã­ã§ã€Œå‘½ã«å«Œã‚ã‚Œã¦ã„ã‚‹ã€‚ã€ã‚’æ­Œã†ã€‚\r\nåƒ•ã‚‰ã¯å‘½ã«å«Œã‚ã‚Œã¦ã„ã‚‹",
            "6ã„ã„ã­ã§ã€Œãƒ‘ãƒ©ã‚µã‚¤ãƒˆã€ã‚’æ­Œã†ã€‚\r\nãªã‚“ã§ãªã‚“ã§ãªã‚“ã§ãªã‚“ã§ãªã‚“ã§ãªã‚“ã§",
            "7RTã§ã€Œã‚¢ã‚¹ãƒãƒ¨ã‚¾ãƒ©å“¨æˆ’ç­ã€ã‚’æ­Œã†ã€‚\r\nç©ºã¸èˆã†ä¸–ç•Œã®å½¼æ–¹",
            "4ã„ã„ã­ã§ã€ŒåŠ£ç­‰ä¸Šç­‰ã€ã‚’æ­Œã†ã€‚\r\nãƒ€ãƒƒãƒ€ãƒƒãƒ€ã‚ãŸã—å¤§äººã«ãªã‚‹",
            "5RTã§ã€Œãƒ¢ã‚¶ã‚¤ã‚¯ãƒ­ãƒ¼ãƒ«ã€ã‚’æ­Œã†ã€‚\r\næ„›ã—ãŸã£ã¦ã„ã„ã˜ã‚ƒãªã„ã‹",
            "6ã„ã„ã­ã§ã€Œãƒ‰ãƒ¼ãƒŠãƒ„ãƒ›ãƒ¼ãƒ«ã€ã‚’æ­Œã†ã€‚\r\nç°¡å˜ãªæ„Ÿæƒ…ã°ã£ã‹æ•°ãˆã¦ã„ãŸã‚‰",
            "4ã„ã„ã­ã§ã€Œã‚°ãƒƒãƒ‘ã‚¤å®£è¨€ã€ã‚’æ­Œã†ã€‚\r\nå¼•ãã“ã‚‚ã‚Šçµ¶å¯¾ã‚¸ãƒ£ã‚¹ãƒ†ã‚£ã‚¹",
            "6RTã§ã€Œã‚·ãƒ£ãƒ«ãƒ«ã€ã‚’æ­Œã†ã€‚\r\næ„›ã‚’è¬³ã£ã¦è¬³ã£ã¦é›²ã®ä¸Š",
            "2ã„ã„ã­ã§ã€Œå¹½éœŠæ±äº¬ã€ã‚’æ­Œã†ã€‚\r\nå¹½éœŠã¿ãŸã„ã ",
            "5ã„ã„ã­ã§ã€Œã‚«ã‚²ãƒ­ã‚¦ãƒ‡ã‚¤ã‚ºã€ã‚’æ­Œã†ã€‚\r\n8æœˆ15æ—¥ã®åˆå¾Œ12æ™‚åŠãã‚‰ã„ã®ã“ã¨",
            "14RTã§ã€Œä½éŸ³å¨éŸ³åŸŸãƒ†ã‚¹ãƒˆã€ã‚’æ­Œã†ã€‚\r\nã“ã‚“ãªã®è¶…é«˜éŸ³ã ã­",
            "4RTã§ã€Œä¹™å¥³è§£å‰–ã€ã‚’æ­Œã†ã€‚\r\nä¹™å¥³è§£å‰–ã§ã‚ãã¼ã†ã‚ˆ",
            "5ã„ã„ã­ã§ã€Œãƒ–ãƒªã‚­ãƒãƒ€ãƒ³ã‚¹ã€ã‚’æ­Œã†ã€‚\r\nãƒ‘ãƒƒãƒ‘ãƒ©ãƒ©ãƒ«ãƒ©ãƒªãƒ–ãƒªã‚­ãƒãƒ€ãƒ³ã‚¹",
            "7RTã§ã€Œçµãƒ³ãƒ‡é–‹ã‚¤ãƒ†ç¾…åˆ¹ãƒˆéª¸ã€ã‚’æ­Œã†ã€‚\r\nã‚‰ã„ ã‚‰ã„",
            "5ã„ã„ã­ã§ã€Œãƒ’ãƒãƒŠã€ã‚’æ­Œã†ã€‚\r\nçµ‚ã‚ã‚“ãªã„æ„›ã‚’æŠ±ã„ã¦ãŸããªã„ã®",
            "9ã„ã„ã­ã§ã€Œã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒ»ãƒã‚¶ãƒ¼ã‚°ãƒ¼ã‚¹ã€ã‚’æ­Œã†ã€‚\r\nã‚ãªãŸã«ã¯åƒ•ãŒè¦‹ãˆã‚‹ã‹ï¼Ÿ",
            "6ã„ã„ã­ã§ã€Œé™ã‚Šãªãç°è‰²ã¸ã€ã‚’æ­Œã†ã€‚\r\næ‰èƒ½ãªã‚“ã¦ç„¡ã„ã‹ã‚‰ã“ã“ã§ä¸€ç”Ÿæ³£ã„ã¦ã„ã‚‹ã‚“ã ã‚",
            "5RTã§ã€Œæ±äº¬ãƒ†ãƒ‡ã‚£ãƒ™ã‚¢ã€ã‚’æ­Œã†ã€‚\r\nå…¨çŸ¥å…¨èƒ½ã®è¨€è‘‰ã‚’ã»ã‚‰èã‹ã›ã¦ã‚ˆ",
            "20ã„ã„ã­ã§ã€Œãƒã‚·ãƒ³ã‚¬ãƒ³ãƒã‚¨ãƒ ãƒ‰ãƒ¼ãƒ«ã€ã‚’æ­Œã†ã€‚\r\nãƒ“ãƒ¼ãƒˆãƒã‚·ãƒ³ã¨ã‚ã‚Šãˆãªã„ã»ã©ã®é«˜é€Ÿç¸¦é€£ãƒªãƒªãƒƒã‚¯"
        ];

        const randomIndex = Math.floor(Math.random() * tasks.length);
        const result = tasks[randomIndex];

        const msgs = await i.channel.messages.fetch(i.message.id);

        msgs.embeds.forEach(async (lembed) => {
            const value = lembed.footer.text;
            if (value !== "0") {
                const Embed = new MessageEmbed()
                    .setColor(config.color)
                    .setTitle(buttonName)
                    .setDescription(`${i.user.username}: \n${result}`)
                    .setThumbnail(`${i.user.displayAvatarURL()}`)
                    .setTimestamp();
                i.reply({ content: i.user.toString(), embeds: [Embed] });

                const msg = await i.fetchReply();
                msg.react("ğŸ”");
                msg.react("â¤ï¸");

                const val = value - 1;

                const fEmbed = new MessageEmbed()
                    .setColor(config.color)
                    .setTitle(buttonName)
                    .setDescription(`çµæœãƒ‘ã‚¿ãƒ¼ãƒ³: ${count} é€šã‚Š`)
                    .setTimestamp()
                    .setFooter({ text: `${val}`, iconURL: '' });

                const button = new MessageActionRow()
                    .addComponents(
                        new MessageButton()
                            .setCustomId(buttonId)
                            .setLabel(buttonmessage)
                            .setStyle(`PRIMARY`),
                    );

                msgs.edit({ embeds: [fEmbed], components: [button] });

                if (value === "1") {
                    const finalEmbed = new MessageEmbed()
                        .setColor(config.color)
                        .setTitle(buttonName)
                        .setDescription(`çµæœãƒ‘ã‚¿ãƒ¼ãƒ³: ${count} é€šã‚Š`)
                        .setTimestamp()
                        .setFooter({ text: `å›æ•°åˆ¶é™ã«é”ã—ã¾ã—ãŸã€‚`, iconURL: '' });

                    const disabledButton = new MessageActionRow()
                        .addComponents(
                            new MessageButton()
                                .setCustomId(buttonId)
                                .setLabel(buttonmessage)
                                .setDisabled(true)
                                .setStyle(`PRIMARY`),
                        );

                    msgs.edit({ embeds: [finalEmbed], components: [disabledButton] });
                }
            }
        });
    }
}
});